<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIKIDS - á”áŸ’ášá–áŸá“áŸ’á’áœááŸ’áá˜á¶á“áŸá·áŸáŸ’áŸ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Khmer OS Battambang', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .date-selector {
            background: #f8f9fa;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            border-bottom: 2px solid #e0e0e0;
        }

        .date-selector select {
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .date-selector select:hover {
            border-color: #764ba2;
            transform: translateY(-2px);
        }

        .date-selector button {
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .btn-save {
            background: #28a745;
        }

        .btn-save:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .btn-telegram {
            background: #0088cc;
        }

        .btn-telegram:hover {
            background: #006699;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 136, 204, 0.3);
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 2px solid #e0e0e0;
            padding: 20px;
            overflow-y: auto;
        }

        .sidebar h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .class-list {
            list-style: none;
        }

        .class-item {
            padding: 15px;
            margin-bottom: 10px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .class-item:hover {
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.2);
        }

        .class-item.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .telegram-settings {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .telegram-settings h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .telegram-settings input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #ffc107;
            border-radius: 8px;
            font-size: 14px;
        }

        .telegram-settings small {
            color: #856404;
            display: block;
            margin-bottom: 10px;
        }

        .controls {
            margin-bottom: 20px;
        }

        .btn-mark-all {
            padding: 12px 25px;
            background: #17a2b8;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-mark-all:hover {
            background: #138496;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(23, 162, 184, 0.3);
        }

        .attendance-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .attendance-table thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .attendance-table th {
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        .attendance-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .attendance-table tr:hover {
            background: #f8f9fa;
        }

        .status-select {
            padding: 8px 15px;
            border: 2px solid #667eea;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .status-select:hover {
            border-color: #764ba2;
        }

        .status-present {
            background: #d4edda;
            color: #155724;
        }

        .status-absent {
            background: #f8d7da;
            color: #721c24;
        }

        .status-permission {
            background: #fff3cd;
            color: #856404;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-weight: bold;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid #e0e0e0;
            }

            .date-selector {
                flex-direction: column;
            }

            .date-selector select,
            .date-selector button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ MIKIDS</h1>
            <p>á”áŸ’ášá–áŸá“áŸ’á’á‚áŸ’ášá”áŸ‹á‚áŸ’ášá„áœááŸ’áá˜á¶á“áŸá·áŸáŸ’áŸ / Attendance System</p>
        </div>

        <div class="date-selector">
            <select id="monthSelect">
                <option value="0">á˜á€ášá¶ / January</option>
                <option value="1">á€á»á˜áŸ’á—áŸˆ / February</option>
                <option value="2">á˜á¸á“á¶ / March</option>
                <option value="3">á˜áŸáŸá¶ / April</option>
                <option value="4">á§áŸá—á¶ / May</option>
                <option value="5">á˜á·áá»á“á¶ / June</option>
                <option value="6">á€á€áŸ’á€áŠá¶ / July</option>
                <option value="7">áŸá¸á á¶ / August</option>
                <option value="8">á€á‰áŸ’á‰á¶ / September</option>
                <option value="9">áá»á›á¶ / October</option>
                <option value="10">áœá·á…áŸ’á†á·á€á¶ / November</option>
                <option value="11">á’áŸ’á“á¼ / December</option>
            </select>

            <select id="yearSelect">
                <option value="2026">2026</option>
                <option value="2027">2027</option>
                <option value="2028">2028</option>
                <option value="2029">2029</option>
                <option value="2030">2030</option>
            </select>

            <button class="btn-save" onclick="saveData()">ğŸ’¾ ášá€áŸ’áŸá¶á‘á»á€á‘á·á“áŸ’á“á“áŸá™ / Save Data</button>
            <button class="btn-telegram" onclick="sendToTelegram()">ğŸ“¤ á•áŸ’á‰á¾ Telegram / Send Telegram</button>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h3>ğŸ“š á”á‰áŸ’á‡á¸ááŸ’á“á¶á€áŸ‹ášáŸ€á“ / Classes</h3>
                <ul class="class-list" id="classList">
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á˜ááŸ’ááŸá™áŸ’á™á‘á¶á”')">ááŸ’á“á¶á€áŸ‹á˜ááŸ’ááŸá™áŸ’á™á‘á¶á”</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áá˜á’áŸ’á™á˜áŸ¢')">ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áá˜á’áŸ’á™á˜áŸ¢</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áá˜á’áŸ’á™á˜áŸ¡')">ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áá˜á’áŸ’á™á˜áŸ¡</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áááŸ’á–áŸáŸ‹áŸ¡')">ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áááŸ’á–áŸáŸ‹áŸ¡</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áááŸ’á–áŸáŸ‹')">ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áááŸ’á–áŸáŸ‹</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¡')">ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¡</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¡,áŸ¡')">ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¡,áŸ¡</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¢')">ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¢</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¢,áŸ¡')">ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¢,áŸ¡</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á‘á¸áŸ£')">ááŸ’á“á¶á€áŸ‹á‘á¸áŸ£</li>
                    <li class="class-item" onclick="selectClass('ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¤ áŸ¥')">ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¤ áŸ¥</li>
                    <li class="class-item" onclick="selectClass('Fount1 mooning')">Fount1 mooning</li>
                    <li class="class-item" onclick="selectClass('Fount1 Evening')">Fount1 Evening</li>
                    <li class="class-item" onclick="selectClass('Fount2')">Fount2</li>
                    <li class="class-item" onclick="selectClass('Fount2.10.narein')">Fount2.10.narein</li>
                    <li class="class-item" onclick="selectClass('Level1')">Level1</li>
                    <li class="class-item" onclick="selectClass('Nursery')">Nursery</li>
                    <li class="class-item" onclick="selectClass('Level2')">Level2</li>
                </ul>

                <div class="telegram-settings">
                    <h3>âš™ï¸ Telegram Settings</h3>
                    <small>Bot Token (á‘á‘á½á›á”á¶á“á–á¸ @BotFather):</small>
                    <input type="text" id="botToken" placeholder="8501623225:AAGu-F_GHSQ-dLBrEME7eidOpW2yDf3qvXw">
                    
                    <small>Chat ID (á‘á‘á½á›á”á¶á“á–á¸ @userinfobot á¬ @RawDataBot):</small>
                    <input type="text" id="chatId" placeholder="-1005090259958">
                    
                    <small>ğŸ’¡ á‡áŸ†á“á½á™áŸ– Bot ááŸ’ášá¼áœááŸ‚á”á¶á“á”á‰áŸ’á…á¼á›á‘áŸ…á€áŸ’á“á»á„ group/chat á˜á»á“</small>
                </div>
            </div>

            <div class="content-area" id="contentArea">
                <div class="empty-state">
                    <h3>áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸááŸ’á“á¶á€áŸ‹ášáŸ€á“</h3>
                    <p>Please Select Class</p>
                    <p style="margin-top: 20px;">ğŸ‘ˆ á…á»á…á›á¾ááŸ’á“á¶á€áŸ‹ášáŸ€á“áá¶á„á†áŸ’áœáŸá„áŠá¾á˜áŸ’á”á¸á…á¶á”áŸ‹á•áŸ’áá¾á˜</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // á‘á·á“áŸ’á“á“áŸá™áŸá·áŸáŸ’áŸá–á·áá”áŸ’ášá¶á€áŠ / Real Student Data
        const studentData = {
            'ááŸ’á“á¶á€áŸ‹á˜ááŸ’ááŸá™áŸ’á™á‘á¶á”': [
                { id: '64', name: 'áƒá»á“ á‘áŸá–á„áŸ’áŸ', nameEn: 'Student64', sex: 'M' },
                { id: '121', name: 'á“á¿á“ áœáŒáŸ’áá“á¶', nameEn: 'Student121', sex: 'M' },
                { id: '128', name: 'á–á·áŸá·á‘áŸ’á¢ á…áŸá“áŸ’á‘áœáŒáŸ’áƒ', nameEn: 'Student128', sex: 'M' },
                { id: '141', name: 'á áŸá„ áŸá¶á‡á¸á„', nameEn: 'Student141', sex: 'F' },
                { id: '132', name: 'áŸá» á”á‰áŸ’á‰á¶ á˜á»á“á·ášá¶á‡', nameEn: 'Student132', sex: 'M' },
                { id: '67', name: 'áˆá¿á“ á”áŸŠá»á“á’á¿á“á–á»á‘áŸ’á’á·', nameEn: 'Student67', sex: 'M' },
                { id: '173', name: 'áŸá¶á“áŸ’á á›á¸á”áŸ‰áŸá„', nameEn: 'Student173', sex: 'M' },
                { id: '163', name: 'á¢áŸá„ á›á¸á†áŸá„', nameEn: 'Student163', sex: 'M' },
                { id: '179', name: 'á…á“áŸ’áá¶ áœáŒáŸ’áá“á¶', nameEn: 'Student179', sex: 'M' },
                { id: '162', name: 'á™áŸ‰á¶á“áŸ‹ áŸá»áá¡áŸá„', nameEn: 'Student162', sex: 'M' },
            ],
            'ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áá˜á’áŸ’á™á˜áŸ¢': [
                { id: '139', name: 'á áŸŠáºá˜ á˜áŸ‰á¸á¢áŸŠá·', nameEn: 'Student139', sex: 'M' },
                { id: '146', name: 'á›á“ áœáŸáŸáŸ’áŸá—á¼', nameEn: 'Student146', sex: 'M' },
                { id: '102', name: 'áŸáŸ†áá¶á„ áœá¸ášáŸˆá”á»ááŸ’áš', nameEn: 'Student102', sex: 'M' },
                { id: '67', name: 'áˆá¿á“ á”áŸŠá»á“á’á¿á“á–á»á‘áŸ’á’á·', nameEn: 'Student67', sex: 'M' },
                { id: '181', name: 'áˆá“ á…áŸáŸáŸ’áŠá¶', nameEn: 'Student181', sex: 'M' },
                { id: '87', name: 'á¢áŸŠá»áŸ† ášáá“á¶áŸá·á‘áŸ’á’á¸á€á¶áš', nameEn: 'Student87', sex: 'F' },
                { id: '113', name: 'áŸáŸŠá¸á˜ áŸá·á‘áŸ’á’á¸á€á¶áš', nameEn: 'Student113', sex: 'F' },
                { id: '164', name: 'á¢áŸŠá¼áŸá»áœááŸ’á áœáŸá á¶áŸ', nameEn: 'Student164', sex: 'M' },
                { id: '177', name: 'áœá¶áŸá“á¶ á–áŸá‡áŸ’ášáŸá»á˜áŸ‰á¶á›á¸', nameEn: 'Student177', sex: 'F' },
                { id: '165', name: 'á›á¹á˜ á›á¸á˜áŸ‰áŸá„á‚áŸá„áŸ’á‚', nameEn: 'Student165', sex: 'M' },
            ],
            'ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áá˜á’áŸ’á™á˜áŸ¡': [
                { id: '29', name: 'áá¶á“áŸ‹ á˜á»á“á¸áœá›áŸ’á›á—á¶', nameEn: 'Student29', sex: 'F' },
                { id: '101', name: 'áˆá»áŸ† áœá¸ášáŸ‹áŸá·á‘áŸ’á’', nameEn: 'Student101', sex: 'M' },
                { id: '65', name: 'á“á·á áŸá»á’á¶ášáŸ‰á¶', nameEn: 'Student65', sex: 'M' },
                { id: '78', name: 'á“á¸ á›á¸á‡á¸á„', nameEn: 'Student78', sex: 'F' },
                { id: '117', name: 'á áŸŠá»á“ ášá¶ááŸ’áá‡áŸááŸáŸ’áŠá¶', nameEn: 'Student117', sex: 'M' },
                { id: '47', name: 'á”á»ááŸ’áá‡áŸ á‡áŸá“á“á¸', nameEn: 'Student47', sex: 'F' },
                { id: '14', name: 'áƒá»á“ á‘áŸá–á¸', nameEn: 'Student14', sex: 'F' },
                { id: '62', name: 'ášá·á‘áŸ’á’á¸ á–á·áŸáŸ’áŸá»ááŸá»á€áŸ’ášá¹á', nameEn: 'Student62', sex: 'M' },
                { id: '49', name: 'á„á·á“ á‘áŸ€á“áœá·á“', nameEn: 'Student49', sex: 'M' },
                { id: '107', name: 'áŸá»á—á€áŸ’ášáŸ áœášáŸˆáŸá·á‘áŸ’á’', nameEn: 'Student107', sex: 'M' },
                { id: '170', name: 'á¢á»á›áœá¿á“ áŠá¶áœá¸á“', nameEn: 'Student170', sex: 'F' },
                { id: '137', name: 'áŸá¿á“ á…á¶á“áŸ‹áŸá»á˜áŸá’á¶', nameEn: 'Student137', sex: 'F' },
                { id: '1', name: 'á”áŸŠá»á“ášá¸á“ ááŸá˜ášá¶', nameEn: 'Student1', sex: 'M' },
            ],
            'ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áááŸ’á–áŸáŸ‹áŸ¡': [
                { id: '54', name: 'á™á“áŸ‹ á›á¸á áŸá„', nameEn: 'Student54', sex: 'M' },
                { id: '75', name: 'áœá·á“ á”á‰áŸ’á‰á¶áœáŸá“áŸ’á', nameEn: 'Student75', sex: 'M' },
                { id: '90', name: 'áŸá¼ ášáŸáŸ’á˜á¸á–á“á·áá¶', nameEn: 'Student90', sex: 'F' },
                { id: '50', name: 'áŸá¼á™ ášá€áŸ’áŸá¶', nameEn: 'Student50', sex: 'M' },
                { id: '0072', name: 'á¢áŸŠá¼ áŸá»áá¢á¶á˜á¸', nameEn: 'Student0072', sex: 'F' },
                { id: '137', name: 'áŸá¿á“ á…á¶á“áŸ‹áŸá»á˜áŸá’á¶', nameEn: 'Student137', sex: 'F' },
                { id: '176', name: 'á”áŸ‰á¹á˜ á˜áŸ‰á¸á‡á¼', nameEn: 'Student176', sex: 'F' },
                { id: '85', name: 'áŸáŸášá¸ á…á“áŸ’á‘áœáŒáŸ’áá“á¶', nameEn: 'Student85', sex: 'M' },
                { id: '161', name: 'á›á¸á˜ á áŸŠá¸á”áŸ‰', nameEn: 'Student161', sex: 'M' },
                { id: '55', name: 'á¢áŸŠá¶ á‡á¸á„á áŸáš', nameEn: 'Student55', sex: 'F' },
                { id: '0079', name: 'á˜á·ááŸ’á á˜áŸ‰áŸá„á áŸá„', nameEn: 'Student0079', sex: 'M' },
                { id: '74', name: 'á…á¶á“áŸ‹á“á¸â€‹ áŸáŸŠá¼áŸá¶á“áŸ‹áá¶', nameEn: 'Student74', sex: 'F' },
            ],
            'ááŸ’á“á¶á€áŸ‹á˜ááŸáŸ’áŠá™áŸ’á™á€á˜áŸ’ášá·áááŸ’á–áŸáŸ‹': [
                { id: '75', name: 'á†á“ áœá·ášáŸˆáŸá·á‘áŸ’á’', nameEn: 'Student75', sex: 'M' },
                { id: '47', name: 'á‡á¶á¡á·á…  á€á¼á›á¸á“', nameEn: 'Student47', sex: 'M' },
                { id: '92', name: 'áŸá»á”á‰áŸ’á‰á¶ áŸáŸ„á˜áŸ‰á¶', nameEn: 'Student92', sex: 'F' },
                { id: '83', name: 'á—áºá“ áá·ášá¶á™á»', nameEn: 'Student83', sex: 'M' },
                { id: '69', name: 'á›á¸ á†á¶á™áˆáŸá“', nameEn: 'Student69', sex: 'M' },
                { id: '77', name: 'áœá»áŒáŸ’áá¸ áŠá¶áœá¸á€á¶', nameEn: 'Student77', sex: 'F' },
                { id: '93', name: 'á¢áŸŠá¹á˜ ášáŸ„á…á“á¶', nameEn: 'Student93', sex: 'F' },
                { id: '72', name: 'áœá„áŸ’áŸ áŠá¶ášáŸ‰á¶áœá¸á“', nameEn: 'Student72', sex: 'M' },
                { id: '95', name: 'á…á¶áœ áœá·á“á á¶áœ', nameEn: 'Student95', sex: 'M' },
                { id: '80', name: 'á„á½á“ á”á‰áŸ’á‰á¶á–á»á‘áŸ’á’á·áŸáŸá€áŸ’áá·', nameEn: 'Student80', sex: 'M' },
            ],
            'ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¡': [
                { id: '88', name: 'á…áŸ†ášá¾á“ á…á“áŸ’á‘á§ááŸ’áá˜', nameEn: 'Student88', sex: 'M' },
                { id: '91', name: 'á”áŸŠá¼  áŸá¶á’á»á€á¶áš', nameEn: 'Student91', sex: 'F' },
                { id: '82', name: 'áŸáŸá“ á™áŸ‰á¶áŸáŸ’á˜á¸á“áá¶', nameEn: 'Student82', sex: 'F' },
                { id: '85', name: 'áŠá“ áŸá»á—áŸááŸ’áŒá˜áŸ‰á¼á“á¸á€á¶', nameEn: 'Student85', sex: 'F' },
                { id: '78', name: 'áŸáŸŠáŸ’ášá¶á„ áŸáŸ€áœá áŸ’áœá»á„', nameEn: 'Student78', sex: 'F' },
                { id: '73', name: 'á áŸá„ á˜áŸ‰á¸á¢áŸŠá·', nameEn: 'Student73', sex: 'F' },
                { id: '74', name: 'á¢á¿á“ á–áŸ…áœá›áŸá€áŸ’á', nameEn: 'Student74', sex: 'F' },
                { id: '70', name: 'ášáŸááŸ’á“ ášáŸ‰á¶ááŸá”', nameEn: 'Student70', sex: 'M' },
            ],
            'ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¡,áŸ¡': [
                { id: '21', name: 'á…á“áŸ’áá¶ á›á¸áá¶', nameEn: 'Student21', sex: 'F' },
                { id: '20', name: 'á–áŸ…  áŸá»áá…á·á“', nameEn: 'Student20', sex: 'M' },
                { id: '17', name: 'áá¶ášáŸ‰á¶ á áŸá„á›á¸', nameEn: 'Student17', sex: 'M' },
                { id: '23', name: 'áŸá»á  áŸá˜áŸ’á”ááŸ’áá·', nameEn: 'Student23', sex: 'M' },
                { id: '22', name: 'áŸá»á  áŠá¶á›á¸áŸ', nameEn: 'Student22', sex: 'F' },
                { id: '29', name: 'áŸáŸ’ášáŸáŸ‹  ášá¸á áŸ’áŸá¶', nameEn: 'Student29', sex: 'F' },
                { id: '41', name: 'á”áŸ‰á»á“ ášá¸á™áŸ‰á¶', nameEn: 'Student41', sex: 'F' },
            ],
            'ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¢': [
                { id: '59', name: 'á¢á»á„ á”á‰áŸ’á‰á¶ášáŸááŸ’á“', nameEn: 'Student59', sex: 'M' },
                { id: '31', name: 'á˜á·ááŸ’á  á˜áŸ‰áŸá„á á½áš', nameEn: 'Student31', sex: 'M' },
                { id: '14', name: 'á™áŸáŸ‹  á“ášá·á“áŸ’á‘', nameEn: 'Student14', sex: 'M' },
                { id: '33', name: 'áœá„áŸ‹  á–á»á‘áŸ’á’á·áá¶', nameEn: 'Student33', sex: 'F' },
                { id: '62', name: 'áŸá¼á™ á”á‰áŸ’á‰á¶', nameEn: 'Student62', sex: 'M' },
                { id: '40', name: 'áŸáŸá„ áŸá¶áá¶', nameEn: 'Student40', sex: 'F' },
                { id: '39', name: 'á…á“áŸ’á‘  áŸá»á•á¶á™áŸ‰á¶á˜áŸáƒ', nameEn: 'Student39', sex: 'M' },
                { id: '30', name: 'áŸáŸŠá“áœá¸ášáŸˆ á”á‰áŸ’á‰á¶á‘áŸá–á¸', nameEn: 'Student30', sex: 'F' },
                { id: '27', name: 'á”áŸŠá¼  áá¶á˜áŸ‰á¶', nameEn: 'Student27', sex: 'M' },
                { id: '65', name: 'á€áŸ‚áœ á˜á»á“áŸ’á“á¸á§ááŸ’áá˜', nameEn: 'Student65', sex: 'M' },
                { id: '56', name: 'áœá“áŸ’ááœá·á“ áá¶áá¶', nameEn: 'Student56', sex: 'F' },
                { id: '36', name: 'á á¶á“ áŸáŸŠá¸áœá áŸáš', nameEn: 'Student36', sex: 'F' },
            ],
            'ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¢,áŸ¡': [
                { id: '9', name: 'á€áŸ‚áœ  áœá¸á“áŸá»á§ááŸ’ááá¶ášá¶', nameEn: 'Student9', sex: 'F' },
                { id: '28', name: 'áˆá»á“áá¶ ášáá“áŸˆáá»á“áŠá¼', nameEn: 'Student28', sex: 'F' },
                { id: '10', name: 'á™áŸ‰á¶ á–áŸá‡áŸ’ášá˜áŸ‰á¼á“á¸á€á¶', nameEn: 'Student10', sex: 'F' },
                { id: '15', name: 'á›á¸á˜ á–á»á‘áŸ’á’á·ášá¶á‡', nameEn: 'Student15', sex: 'M' },
                { id: '3', name: 'á¡ áŸáŸŠá¸áœá áŸŠá½á™', nameEn: 'Student3', sex: 'F' },
                { id: '2', name: 'á¡á¶á™ á˜á»á“á·á…á·á“áŸ’áŠá¶', nameEn: 'Student2', sex: 'F' },
                { id: '24', name: 'á¢áŸ„á€ á“á·áŸá·áŸ’áŸá', nameEn: 'Student24', sex: 'M' },
                { id: '44', name: 'á…áŸ†ášá¾á“ á˜áŸ‰á¶á“á¸áá¶', nameEn: 'Student44', sex: 'F' },
            ],
            'ááŸ’á“á¶á€áŸ‹á‘á¸áŸ£': [
                { id: '1', name: 'á¡á¶á™  á—á¶ášáŸ‰á¶áŠá¶áœá¸áŒ', nameEn: 'Student1', sex: 'M' },
                { id: '42', name: 'áœá„áŸ’áŸ á˜á»á“á¸á€á‰áŸ’á…á“á¶', nameEn: 'Student42', sex: 'F' },
                { id: '43', name: 'á–áŸ… áŸá»á“á¸áá¶', nameEn: 'Student43', sex: 'F' },
                { id: '4', name: 'á¡ áŸá»áœááŸ’áá á¶á“áŸ‹áá¶', nameEn: 'Student4', sex: 'F' },
            ],
            'ááŸ’á“á¶á€áŸ‹á‘á¸áŸ¤ áŸ¥': [
                { id: '82', name: 'ášá»á“ ášáŸáŸ’á˜á¸', nameEn: 'Student82', sex: 'M' },
                { id: '149', name: 'á’á¸ áŸá»áœááŸ’á áŸá·á‘áŸ’á’á·á€á¶', nameEn: 'Student149', sex: 'F' },
                { id: '143', name: 'á•á“  áŸá»áá áŸ€á„', nameEn: 'Student143', sex: 'M' },
                { id: '133', name: 'áŸá»á‘áŸ’á’ á›á¸á“á”áŸ’ášá»áŸáŸá·á‘áŸ’á’', nameEn: 'Student133', sex: 'M' },
                { id: '134', name: 'á¢áŸŠá¶á” á›á¸á™á¸á„', nameEn: 'Student134', sex: 'F' },
                { id: '88', name: 'á…áŸ†ášá¾á“ á…á“áŸ’á‘á§ááŸ’áá˜', nameEn: 'Student88', sex: 'M' },
                { id: '127', name: 'á á˜ á…á¶á“áŸ‹á”á»ášá¸ášá€áŸ’áŸ', nameEn: 'Student127', sex: 'M' },
                { id: '182', name: 'áá¶áŸ†á„ á áŸŠá½á™á›á¸á“', nameEn: 'Student182', sex: 'F' },
            ],
            'Fount1 mooning': [
                { id: '116', name: 'á†á“ á˜áŸ‰áŸá„áŸáŸŠá¸á“', nameEn: 'Student116', sex: 'M' },
                { id: '58', name: 'á„á½á“ á‚á¸á˜á á¶á”áŸ‹', nameEn: 'Student58', sex: 'M' },
                { id: '145', name: 'á†á¶á™ á—á¸á„á¢áŸŠá¸á„', nameEn: 'Student145', sex: 'F' },
                { id: '125', name: 'á”á‰áŸ’á‰á¶ á—áŸááŸ’ášá¶', nameEn: 'Student125', sex: 'F' },
                { id: '90', name: 'á…áŸ†ášá¾á“ ášá¿á“ášá¹á‘áŸ’á’á·ášá¶á‡', nameEn: 'Student90', sex: 'M' },
                { id: '159', name: 'áá“ áŸáŸŠá¸á áŸ’á‚áŸ’áŸá·á…', nameEn: 'Student159', sex: 'F' },
            ],
            'Fount1 Evening': [
                { id: '148', name: 'á”áŸášáŸ‰áŸáŸ á˜áŸ‰áŸƒáƒá¾áŸ', nameEn: 'Student148', sex: 'M' },
                { id: '144', name: 'á áŸá„ áŸá“áŸ’áá·á—á¶á–', nameEn: 'Student144', sex: 'M' },
                { id: '157', name: 'áŠá½á„  áŸá»á˜áŸá’á¶', nameEn: 'Student157', sex: 'M' },
                { id: '183', name: 'áá»á„ á áŸ’áœá»á„á˜áŸ‰áŸá„', nameEn: 'Student183', sex: 'M' },
                { id: '158', name: 'á–á“áŸ’á›á€ áœá·ášáŸá·á‘áŸ’á’', nameEn: 'Student158', sex: 'M' },
                { id: '172', name: 'ášáá“á¶ áŸáŸ€áœá›á·', nameEn: 'Student172', sex: 'F' },
                { id: '180', name: 'ášáŸ‰á¶ááŸ‹ á–áŸá‡áŸ’ášá˜ášá€á', nameEn: 'Student180', sex: 'F' },
                { id: '178', name: 'á›á¸áœá‘áŸ’á’á¸ á‡á»áá·á˜á¶', nameEn: 'Student178', sex: 'F' },
                { id: '184', name: 'á á¼ á›á¸á—á¸á„', nameEn: 'Student184', sex: 'M' },
                { id: '174', name: 'áœá·á…áŸ’á†á·á€á¶ á˜á»á“áŸ’á“á¸á‘áŸá–á¸', nameEn: 'Student174', sex: 'F' },
                { id: '185', name: 'á™á¹á˜ á–á»á‘áŸ’á’á·áœá„áŸ’áŸ', nameEn: 'Student185', sex: 'M' },
                { id: '171', name: 'áŸá»á„ áŸá·ášá¸á”á»ááŸ’áš', nameEn: 'Student171', sex: 'M' },
                { id: '147', name: 'áŸá»á—áŸá€áŸ’áš áœá¸ášá”á»ááŸ’áš', nameEn: 'Student147', sex: 'M' },
                { id: '150', name: 'áœáŸ‰áŸá á“á¸ášá¸áá¶', nameEn: 'Student150', sex: 'F' },
                { id: '166', name: 'á›á¸áá¶ á á»á„áŸáŸá€áŸ’á€á·á¢á’á·á—á¼', nameEn: 'Student166', sex: 'M' },
            ],
            'Fount2': [
                { id: '86', name: 'á’áŸá„ á˜áŸ‰áŸá„á›á¸', nameEn: 'Student86', sex: 'M' },
                { id: '70', name: 'ášáŸááŸ’á“ ášáŸ‰á¶ááŸá”', nameEn: 'Student70', sex: 'M' },
            ],
            'Fount2.10.narein': [
                { id: '68', name: 'áŸá»á„ ášá¹á‘áŸ’á’áŸáŸá€áŸ’á€', nameEn: 'Student68', sex: 'M' },
                { id: '66', name: 'á”áŸŠá»á“á¡áŸá„ á¢áŸŠáŸƒáŠá¹á€', nameEn: 'Student66', sex: 'M' },
                { id: '67', name: 'á—áŸ„á‚ áŸáŸ’á–á¸ááŒá¸', nameEn: 'Student67', sex: 'M' },
            ],
            'Level1': [
                { id: '62', name: 'áˆá¼á€ áˆá·á“á¡á»á„', nameEn: 'Student62', sex: 'M' },
                { id: '64', name: 'á›á¶á„ áœáŒáŸ’áƒá“á’á“á»', nameEn: 'Student64', sex: 'M' },
            ],
            'Nursery': [
                { id: '48', name: 'áŸá»á—á€áŸ’áŠá· á‘á·ááŸ’ášáŠá¶áá¶', nameEn: 'Student48', sex: 'F' },
                { id: '63', name: 'á“á¿á“ áœáŒáŸ’áá“áŸ‡', nameEn: 'Student63', sex: 'M' },
                { id: '49', name: 'áŸá»á—á€áŸ’áŠá· ášáá“', nameEn: 'Student49', sex: 'M' },
                { id: '61', name: 'á•á›â€‹ áŸá»áœááŸ’á', nameEn: 'Student61', sex: 'M' },
                { id: '53', name: 'á á»á„ áŸá·á‘áŸ’á’á·áá¶á›áŸ‹', nameEn: 'Student53', sex: 'M' },
                { id: '55', name: 'á’áŸá„ á‡á¼á›á¸á‰', nameEn: 'Student55', sex: 'F' },
                { id: '1', name: 'á¡á¶á™ á—á¶ášáŸ‰á¶áŠá¶áœá¸áŒ', nameEn: 'Student1', sex: 'M' },
                { id: '4', name: 'á¡ áŸá»áœááŸ’áá á¶á“áŸ‹áá¶', nameEn: 'Student4', sex: 'F' },
            ],
            'Level2': [
                { id: '147', name: 'áŸá»á—á€áŸ’áš áœá¸ášá”á»ááŸ’áš', nameEn: 'Student147', sex: 'M' },
                { id: '166', name: 'á›á¸áá¶ ášáŸááŸ’á“á á»á„áŸáŸá€áŸ’á€á·á¢á’á·á—á¼', nameEn: 'Student166', sex: 'M' },
                { id: '160', name: 'áá¼ áŸá·á‘áŸ’á’á¸á™á¼áá¶', nameEn: 'Student160', sex: 'F' },
                { id: '175', name: 'á áŸá„ á‡áŸášá˜áŸ‰á¸á„', nameEn: 'Student175', sex: 'F' },
            ],
        };

        let currentClass = null;
        let attendanceData = {};

        // á•áŸ’á‘á»á€á‘á·á“áŸ’á“á“áŸá™á–á¸ LocalStorage / Load data from LocalStorage
        function loadFromStorage() {
            const saved = localStorage.getItem('mikidsAttendance');
            if (saved) {
                attendanceData = JSON.parse(saved);
            }

            const savedToken = localStorage.getItem('telegramBotToken');
            const savedChatId = localStorage.getItem('telegramChatId');
            
            if (savedToken) document.getElementById('botToken').value = savedToken;
            if (savedChatId) document.getElementById('chatId').value = savedChatId;
        }

        // á€áŸ†áááŸ‹ááŸ‚á“á·á„á†áŸ’á“á¶áŸ†á”á…áŸ’á…á»á”áŸ’á”á“áŸ’á“ / Set current month and year
        function setCurrentDate() {
            const now = new Date();
            document.getElementById('monthSelect').value = now.getMonth();
            document.getElementById('yearSelect').value = now.getFullYear();
        }

        // á‡áŸ’ášá¾áŸášá¾áŸááŸ’á“á¶á€áŸ‹ášáŸ€á“ / Select class
        function selectClass(className) {
            currentClass = className;
            
            // Update active class
            document.querySelectorAll('.class-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayStudents(className);
        }

        // á”á„áŸ’á á¶á‰á”á‰áŸ’á‡á¸áŸá·áŸáŸ’áŸ / Display students
        function displayStudents(className) {
            const students = studentData[className];
            const month = document.getElementById('monthSelect').value;
            const year = document.getElementById('yearSelect').value;
            const dateKey = `${year}-${month}-${className}`;
            
            let html = `
                <div class="controls">
                    <h2 style="color: #667eea; margin-bottom: 15px;">ğŸ“‹ ${className}</h2>
                    <button class="btn-mark-all" onclick="markAllPresent()">âœ… áŸá˜áŸ’á‚á¶á›áŸ‹á‘á¶áŸ†á„á¢áŸáŸ‹á˜á¶á“áœááŸ’áá˜á¶á“ / Mark All Present</button>
                </div>
                
                <table class="attendance-table">
                    <thead>
                        <tr>
                            <th>á›áŸáášáŸ€á„ / No.</th>
                            <th>á›áŸááŸá˜áŸ’á‚á¶á›áŸ‹ / ID</th>
                            <th>áˆáŸ’á˜áŸ„áŸ‡áŸá·áŸáŸ’áŸ / Student Name</th>
                            <th>á—áŸá‘ / Sex</th>
                            <th>áŸáŸ’áá¶á“á—á¶á– / Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            students.forEach((student, index) => {
                const studentKey = `${dateKey}-${student.id}`;
                const currentStatus = attendanceData[studentKey] || 'á˜á¶á“áœááŸ’áá˜á¶á“';
                
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${student.id}</td>
                        <td>${student.name} / ${student.nameEn}</td>
                        <td>${student.sex}</td>
                        <td>
                            <select class="status-select status-${currentStatus === 'á˜á¶á“áœááŸ’áá˜á¶á“' ? 'present' : currentStatus === 'á¢áœááŸ’áá˜á¶á“' ? 'absent' : 'permission'}" 
                                    onchange="updateStatus('${student.id}', this.value)">
                                <option value="á˜á¶á“áœááŸ’áá˜á¶á“" ${currentStatus === 'á˜á¶á“áœááŸ’áá˜á¶á“' ? 'selected' : ''}>âœ… á˜á¶á“áœááŸ’áá˜á¶á“ / Present</option>
                                <option value="á¢áœááŸ’áá˜á¶á“" ${currentStatus === 'á¢áœááŸ’áá˜á¶á“' ? 'selected' : ''}>âŒ á¢áœááŸ’áá˜á¶á“ / Absent</option>
                                <option value="á…áŸ’á”á¶á”áŸ‹" ${currentStatus === 'á…áŸ’á”á¶á”áŸ‹' ? 'selected' : ''}>ğŸ“‹ á…áŸ’á”á¶á”áŸ‹ / Permission</option>
                            </select>
                        </td>
                    </tr>
                `;
            });

            html += `
                    </tbody>
                </table>
            `;

            document.getElementById('contentArea').innerHTML = html;
        }

        // á”á“áŸ’á‘á¶á“áŸ‹áŸáŸ’áá¶á“á—á¶á– / Update status
        function updateStatus(studentId, status) {
            const month = document.getElementById('monthSelect').value;
            const year = document.getElementById('yearSelect').value;
            const dateKey = `${year}-${month}-${currentClass}`;
            const studentKey = `${dateKey}-${studentId}`;
            
            attendanceData[studentKey] = status;
            
            // Update select styling
            event.target.className = `status-select status-${status === 'á˜á¶á“áœááŸ’áá˜á¶á“' ? 'present' : status === 'á¢áœááŸ’áá˜á¶á“' ? 'absent' : 'permission'}`;
        }

        // áŸá˜áŸ’á‚á¶á›áŸ‹á‘á¶áŸ†á„á¢áŸáŸ‹á˜á¶á“áœááŸ’áá˜á¶á“ / Mark all present
        function markAllPresent() {
            if (!currentClass) return;
            
            const students = studentData[currentClass];
            const month = document.getElementById('monthSelect').value;
            const year = document.getElementById('yearSelect').value;
            const dateKey = `${year}-${month}-${currentClass}`;
            
            students.forEach(student => {
                const studentKey = `${dateKey}-${student.id}`;
                attendanceData[studentKey] = 'á˜á¶á“áœááŸ’áá˜á¶á“';
            });
            
            displayStudents(currentClass);
            showAlert('success', 'âœ… á”á¶á“áŸá˜áŸ’á‚á¶á›áŸ‹áŸá·áŸáŸ’áŸá‘á¶áŸ†á„á¢áŸáŸ‹á˜á¶á“áœááŸ’áá˜á¶á“ / All students marked as present!');
        }

        // ášá€áŸ’áŸá¶á‘á»á€á‘á·á“áŸ’á“á“áŸá™ / Save data
        function saveData() {
            localStorage.setItem('mikidsAttendance', JSON.stringify(attendanceData));
            
            const botToken = document.getElementById('botToken').value.trim();
            const chatId = document.getElementById('chatId').value.trim();
            
            if (botToken) localStorage.setItem('telegramBotToken', botToken);
            if (chatId) localStorage.setItem('telegramChatId', chatId);
            
            showAlert('success', 'ğŸ’¾ á‘á·á“áŸ’á“á“áŸá™ááŸ’ášá¼áœá”á¶á“ášá€áŸ’áŸá¶á‘á»á€áŠáŸ„á™á‡áŸ„á‚á‡áŸá™! / Data saved successfully!');
        }

        // á•áŸ’á‰á¾áŸá¶ášá‘áŸ… Telegram / Send to Telegram
        async function sendToTelegram() {
            const botToken = document.getElementById('botToken').value.trim();
            const chatId = document.getElementById('chatId').value.trim();

            // á–á·á“á·ááŸ’á™á˜á¾á› Bot Token á“á·á„ Chat ID
            if (!botToken || !chatId) {
                showAlert('error', 'âŒ áŸá¼á˜á”áŸ†á–áŸá‰ Bot Token á“á·á„ Chat ID á‡á¶á˜á»á“áŸá·á“! / Please fill in Bot Token and Chat ID first!');
                return;
            }

            if (!currentClass) {
                showAlert('error', 'âŒ áŸá¼á˜á‡áŸ’ášá¾áŸášá¾áŸááŸ’á“á¶á€áŸ‹ášáŸ€á“á‡á¶á˜á»á“áŸá·á“! / Please select a class first!');
                return;
            }

            // á”á„áŸ’á€á¾áášá”á¶á™á€á¶ášááŸ / Create report
            const month = document.getElementById('monthSelect').value;
            const year = document.getElementById('yearSelect').value;
            const monthNames = ['á˜á€ášá¶', 'á€á»á˜áŸ’á—áŸˆ', 'á˜á¸á“á¶', 'á˜áŸáŸá¶', 'á§áŸá—á¶', 'á˜á·áá»á“á¶', 'á€á€áŸ’á€áŠá¶', 'áŸá¸á á¶', 'á€á‰áŸ’á‰á¶', 'áá»á›á¶', 'áœá·á…áŸ’á†á·á€á¶', 'á’áŸ’á“á¼'];
            const dateKey = `${year}-${month}-${currentClass}`;
            
            const students = studentData[currentClass];
            let presentCount = 0;
            let absentCount = 0;
            let permissionCount = 0;
            let absentStudents = [];
            let permissionStudents = [];
            
            // ášá¶á”áŸ‹á…áŸ†á“á½á“á“á·á„áŠá¶á€áŸ‹á€áŸ’á“á»á„á”á‰áŸ’á‡á¸
            students.forEach((student) => {
                const studentKey = `${dateKey}-${student.id}`;
                const status = attendanceData[studentKey] || 'á˜á¶á“áœááŸ’áá˜á¶á“';
                
                if (status === 'á˜á¶á“áœááŸ’áá˜á¶á“') {
                    presentCount++;
                } else if (status === 'á¢áœááŸ’áá˜á¶á“') {
                    absentCount++;
                    absentStudents.push(student);
                } else {
                    permissionCount++;
                    permissionStudents.push(student);
                }
            });

            // á–á·á“á·ááŸ’á™áá¶áá¾á˜á¶á“áŸá·áŸáŸ’áŸá¢áœááŸ’áá˜á¶á“á¬á…áŸ’á”á¶á”áŸ‹á‘áŸ
            if (absentCount === 0 && permissionCount === 0) {
                showAlert('success', 'âœ… á¢á”á¢ášáŸá¶á‘áš! áŸá·áŸáŸ’áŸá‘á¶áŸ†á„á¢áŸáŸ‹á˜á¶á“áœááŸ’áá˜á¶á“á‚áŸ’ášá”áŸ‹á‚áŸ’á“á¶! / Congratulations! All students are present!');
                return;
            }
            
            let message = `âš ï¸ ášá”á¶á™á€á¶ášááŸáŸá·áŸáŸ’áŸá¢áœááŸ’áá˜á¶á“\nABSENT STUDENTS REPORT\n`;
            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            message += `ğŸ“š ááŸ’á“á¶á€áŸ‹ / Class: ${currentClass}\n`;
            message += `ğŸ“… ááŸ’á„áŸƒ / Date: ${new Date().toLocaleDateString('km-KH')}\n`;
            message += `ğŸ“… ááŸ‚ / Month: ${monthNames[month]} ${year}\n`;
            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;

            // á”á‰áŸ’á‡á¸áŸá·áŸáŸ’áŸá¢áœááŸ’áá˜á¶á“
            if (absentStudents.length > 0) {
                message += `âŒ áŸá·áŸáŸ’áŸá¢áœááŸ’áá˜á¶á“ (${absentCount} á“á¶á€áŸ‹):\n`;
                absentStudents.forEach((student, index) => {
                    message += `   ${index + 1}. ${student.name} (${student.nameEn})\n`;
                    message += `      ID: ${student.id} | Sex: ${student.sex}\n`;
                });
                message += `\n`;
            }

            // á”á‰áŸ’á‡á¸áŸá·áŸáŸ’áŸá…áŸ’á”á¶á”áŸ‹
            if (permissionStudents.length > 0) {
                message += `ğŸ“‹ áŸá·áŸáŸ’áŸáŸá»áŸ†á…áŸ’á”á¶á”áŸ‹ (${permissionCount} á“á¶á€áŸ‹):\n`;
                permissionStudents.forEach((student, index) => {
                    message += `   ${index + 1}. ${student.name} (${student.nameEn})\n`;
                    message += `      ID: ${student.id} | Sex: ${student.sex}\n`;
                });
                message += `\n`;
            }

            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            message += `ğŸ“ˆ áŸá„áŸ’ááŸá” / SUMMARY:\n`;
            message += `âœ… á˜á¶á“áœááŸ’áá˜á¶á“: ${presentCount} á“á¶á€áŸ‹\n`;
            message += `âŒ á¢áœááŸ’áá˜á¶á“: ${absentCount} á“á¶á€áŸ‹\n`;
            message += `ğŸ“‹ á…áŸ’á”á¶á”áŸ‹: ${permissionCount} á“á¶á€áŸ‹\n`;
            message += `ğŸ‘¥ áŸášá»á”: ${students.length} á“á¶á€áŸ‹\n`;
            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            message += `ğŸ« MIKIDS Attendance System\n`;
            message += `â° ${new Date().toLocaleString('km-KH')}`;

            // á•áŸ’á‰á¾áŸá¶ášá‘áŸ… Telegram
            showAlert('info', 'â³ á€áŸ†á–á»á„á•áŸ’á‰á¾áŸá¶ášá‘áŸ… Telegram... / Sending message to Telegram...');

            try {
                const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: chatId,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });

                const data = await response.json();

                if (data.ok) {
                    showAlert('success', `âœ… á”á¶á“á•áŸ’á‰á¾áŸá¶ášá‘áŸ… Telegram áŠáŸ„á™á‡áŸ„á‚á‡áŸá™! / Message sent to Telegram successfully!\n\nğŸ“Š áŸá·áŸáŸ’áŸá¢áœááŸ’áá˜á¶á“: ${absentCount} á“á¶á€áŸ‹\nğŸ“‹ áŸá·áŸáŸ’áŸáŸá»áŸ†á…áŸ’á”á¶á”áŸ‹: ${permissionCount} á“á¶á€áŸ‹`);
                } else {
                    console.error('Telegram API Error:', data);
                    showAlert('error', `âŒ á€áŸ†á á»áŸ: ${data.description || 'á˜á·á“á¢á¶á…á•áŸ’á‰á¾áŸá¶ášá”á¶á“'} / Error: ${data.description || 'Cannot send message'}\n\náŸá¼á˜á–á·á“á·ááŸ’á™:\n- Bot Token ááŸ’ášá¹á˜ááŸ’ášá¼áœ?\n- Chat ID ááŸ’ášá¹á˜ááŸ’ášá¼áœ?\n- Bot á”á¶á“á”á‰áŸ’á…á¼á›á€áŸ’á“á»á„ chat á á¾á™á¬á“áŸ…?\n- Bot á˜á¶á“áŸá·á‘áŸ’á’á·á•áŸ’á‰á¾áŸá¶áš?`);
                }
            } catch (error) {
                console.error('Network Error:', error);
                showAlert('error', `âŒ á€áŸ†á á»áŸá”ááŸ’áá¶á‰ / Network Error: ${error.message}\n\náŸá¼á˜á–á·á“á·ááŸ’á™á€á¶ášáá—áŸ’á‡á¶á”áŸ‹á¢áŸŠá¸á“á’áºáá·áášá”áŸáŸ‹á¢áŸ’á“á€`);
            }
        }

        // á”á„áŸ’á á¶á‰áŸá¶ášá‡á¼á“áŠáŸ†áá¹á„ / Show alert
        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = message;
            
            const contentArea = document.getElementById('contentArea');
            contentArea.insertBefore(alertDiv, contentArea.firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // á…á¶á”áŸ‹á•áŸ’áá¾á˜á€á˜áŸ’á˜áœá·á’á¸ / Initialize app
        window.onload = function() {
            setCurrentDate();
            loadFromStorage();
        };
    </script>
</body>
</html>
