<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIKIDS Attendance Pro v9.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Kantumruy+Pro:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Kantumruy Pro', sans-serif; background-color: #f1f5f9; }
        .active-class { background-color: #1e40af !important; color: white !important; border-left: 5px solid #fbbf24 !important; }
        .radio-p:checked + span { color: #10b981; font-weight: bold; }
        .radio-l:checked + span { color: #f59e0b; font-weight: bold; }
        .radio-a:checked + span { color: #ef4444; font-weight: bold; }
        @media print { .no-print { display: none; } }
    </style>
</head>
<body>

    <nav class="bg-blue-900 text-white p-4 sticky top-0 z-50 shadow-md no-print">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-yellow-400 text-blue-900 font-black px-2 py-1 rounded">MIKIDS</div>
                <h1 class="font-bold text-lg tracking-tight">Attendance System</h1>
            </div>
            <div class="flex gap-2">
                <select id="sel-month" onchange="refreshTable()" class="bg-blue-800 text-xs border-none rounded px-2 outline-none cursor-pointer">
                    <option value="January">January</option><option value="February">February</option>
                    <option value="March">March</option><option value="April">April</option>
                    <option value="May">May</option><option value="June">June</option>
                    <option value="July">July</option><option value="August">August</option>
                    <option value="September">September</option><option value="October">October</option>
                    <option value="November">November</option><option value="December">December</option>
                </select>
                <select id="sel-year" onchange="refreshTable()" class="bg-blue-800 text-xs border-none rounded px-2 outline-none cursor-pointer">
                    <option value="2026" selected>2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                    <option value="2029">2029</option>
                    <option value="2030">2030</option>
                </select>
                <button onclick="saveLocal()" class="bg-emerald-500 hover:bg-emerald-600 px-4 py-1.5 rounded text-xs font-bold transition">Save Data</button>
                <button onclick="sendToTelegram()" class="bg-sky-500 hover:bg-sky-600 px-4 py-1.5 rounded text-xs font-bold transition">Send Telegram</button>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto flex flex-col md:flex-row gap-6 p-6">
        
        <aside class="w-full md:w-80 bg-white rounded-xl shadow-sm border border-slate-200 p-4 h-[85vh] overflow-y-auto no-print">
            <h2 class="text-slate-400 text-[10px] font-bold uppercase mb-4 tracking-widest italic">·ûî·ûâ·üí·ûá·û∏·ûê·üí·ûì·û∂·ûÄ·üã·ûö·üÄ·ûì / Classes</h2>
            <div id="class-list" class="flex flex-col gap-1"></div>
            
            <div class="mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200">
                <label class="text-[9px] font-bold text-slate-500 uppercase tracking-tighter">Telegram Settings</label>
                <input id="tg-id" type="text" value="-1005090259958" class="w-full text-xs p-2 border rounded mt-1 mb-2 outline-none focus:ring-1 ring-blue-300">
                <input id="tg-token" type="password" value="8501623225:AAGu-F_GHSQ-dLBrEME7eidOpW2yDf3qvXw" class="w-full text-xs p-2 border rounded outline-none focus:ring-1 ring-blue-300">
            </div>
        </aside>

        <main class="flex-1 bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b flex justify-between items-center bg-slate-50/50">
                <div>
                    <h2 id="display-class-name" class="text-2xl font-bold text-slate-800">Please Select Class</h2>
                    <p id="display-date" class="text-slate-500 text-sm font-medium"></p>
                </div>
                <button onclick="selectAllPresent()" class="bg-indigo-100 text-indigo-700 px-4 py-2 rounded-lg text-xs font-bold hover:bg-indigo-200 transition no-print">
                    ‚úÖ Mark All Present
                </button>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead>
                        <tr class="bg-slate-100/50 text-slate-500 text-[10px] font-bold uppercase border-b">
                            <th class="p-4 w-12 text-center">No.</th>
                            <th class="p-4 w-20">ID</th>
                            <th class="p-4">Student Name</th>
                            <th class="p-4 w-16 text-center">Sex</th>
                            <th class="p-4 text-center">Status</th>
                        </tr>
                    </thead>
                    <tbody id="student-table-body" class="divide-y divide-slate-100 text-sm"></tbody>
                </table>
            </div>
            <div id="empty-msg" class="p-20 text-center text-slate-300 font-medium italic">Select a class from the left sidebar to start.</div>
        </main>
    </div>

    <script>
        const allData = [
            { className: "Nursery", students: [{id:"148", n:"·ûî·üÅ·ûö·üâ·üÅ·ûü ·ûò·üâ·üÉ·ûÉ·ûæ·ûü", g:"M"},{id:"144", n:"·û†·üÅ·ûÑ ·ûü·ûì·üí·ûè·û∑·ûó·û∂·ûñ", g:"M"},{id:"157", n:"·ûä·ûΩ·ûÑ ·ûü·ûª·ûò·üÅ·ûí·û∂", g:"M"},{id:"183", n:"·ûê·ûª·ûÑ ·û†·üí·ûú·ûª·ûÑ·ûò·üâ·üÅ·ûÑ", g:"M"},{id:"158", n:"·ûñ·ûì·üí·ûõ·ûÄ ·ûú·û∑·ûö·ûü·û∑·ûë·üí·ûí", g:"M"},{id:"172", n:"·ûö·ûè·ûì·û∂ ·ûü·üÄ·ûú·ûõ·û∑", g:"F"},{id:"180", n:"·ûö·üâ·û∂·ûè·üã ·ûñ·üÅ·ûá·üí·ûö·ûò·ûö·ûÄ·ûè", g:"F"},{id:"178", n:"·ûõ·û∏·ûú·ûë·üí·ûí·û∏ ·ûá·ûª·ûè·û∑·ûò·û∂", g:"F"},{id:"184", n:"·û†·ûº ·ûõ·û∏·ûó·û∏·ûÑ", g:"-"},{id:"174", n:"·ûú·û∑·ûÖ·üí·ûÜ·û∑·ûÄ·û∂ ·ûò·ûª·ûì·üí·ûì·û∏·ûë·üÅ·ûñ·û∏", g:"F"},{id:"185", n:"·ûô·ûπ·ûò ·ûñ·ûª·ûë·üí·ûí·û∑·ûú·ûÑ·üí·ûü", g:"M"},{id:"171", n:"·ûü·ûª·ûÑ ·ûü·û∑·ûö·û∏·ûî·ûª·ûè·üí·ûö", g:"M"},{id:"147", n:"·ûü·ûª·ûó·üê·ûÄ·üí·ûö ·ûú·û∏·ûö·ûî·ûª·ûè·üí·ûö", g:"M"},{id:"150", n:"·ûú·üâ·üÅ·ûè ·ûì·û∏·ûö·û∏·ûè·û∂", g:"F"},{id:"166", n:"·ûõ·û∏·ûé·û∂ ·û†·ûª·ûÑ·ûü·üê·ûÄ·üí·ûÄ·û∑·û¢·ûí·û∑·ûó·ûº", g:"M"}] },
            { className: "·ûò·ûè·üí·ûè·üÅ·ûô·üí·ûô·ûë·û∂·ûî", students: [{id:"147", n:"·ûü·ûª·ûó·ûÄ·üí·ûö‚Äã‚Äã ·ûú·û∏·ûö·ûî·ûª·ûè·üí·ûö", g:"M"},{id:"166", n:"·ûõ·û∏·ûé·û∂ ·ûö·üê·ûè·üí·ûì·û†·ûª·ûÑ·ûü·üê·ûÄ·üí·ûÄ·û∑·û¢·ûí·û∑·ûó·ûº", g:"M"},{id:"160", n:"·ûê·ûº ·ûü·û∑·ûë·üí·ûí·û∏·ûô·ûº·ûé·û∂", g:"F"},{id:"175", n:"·û†·üÅ·ûÑ ·ûá·üê·ûö·ûò·üâ·û∏·ûÑ", g:"F"},{id:"-", n:"·ûú·üâ·üÅ·ûè ·ûì·û∏·ûö·û∏·ûè·û∂", g:"F"}] },
            { className: "·ûò·ûè·üí·ûè·üÅ·ûô·üí·ûô·ûÄ·ûé·üí·ûè·û∂·ûõ ·ü°", students: [{id:"64", n:"·ûÉ·ûª·ûì ·ûë·üÅ·ûñ·ûÑ·üí·ûü", g:"M"},{id:"121", n:"·ûì·ûø·ûì ·ûú·ûå·üí·ûç·ûì·û∂", g:"M"},{id:"128", n:"·ûñ·û∑·ûü·û∑·ûë·üí·û¢ ·ûÖ·üê·ûì·üí·ûë·ûú·ûå·üí·ûÉ", g:"M"},{id:"141", n:"·û†·üÅ·ûÑ ·ûü·û∂·ûá·û∏·ûÑ", g:"F"},{id:"132", n:"·ûü·ûª ·ûî·ûâ·üí·ûâ·û∂ ·ûò·ûª·ûì·û∑·ûö·û∂·ûá", g:"M"},{id:"67", n:"·ûà·ûø·ûì ·ûî·üä·ûª·ûì·ûí·ûø·ûì·ûñ·ûª·ûë·üí·ûí·û∑", g:"M"},{id:"173", n:"·ûü·û∂·ûì·üí·ûè ·ûõ·û∏·ûî·üâ·üÅ·ûÑ", g:"M"},{id:"163", n:"·û¢·üÅ·ûÑ ·ûõ·û∏·ûÜ·üÅ·ûÑ", g:"M"},{id:"179", n:"·ûÖ·ûì·üí·ûê·û∂ ·ûú·ûå·üí·ûç·ûì·û∂", g:"M"},{id:"162", n:"·ûô·üâ·û∂·ûì·üã ·ûü·ûª·ûÅ·û°·üÅ·ûÑ", g:"M"}] },
            { className: "·ûò·ûè·üí·ûè·üÅ·ûô·üí·ûô·ûÄ·ûé·üí·ûè·û∂·ûõ ·ü¢", students: [{id:"139", n:"·û†·üä·û∫·ûò ·ûò·üâ·û∏·û¢·üä·û∑", g:"M"},{id:"146", n:"·ûõ·ûì ·ûú·üÅ·ûü·üí·ûü·ûó·ûº", g:"M"},{id:"102", n:"·ûü·üÜ·ûé·û∂·ûÑ ·ûú·û∏·ûö·üà·ûî·ûª·ûè·üí·ûö", g:"M"},{id:"67", n:"·ûà·ûø·ûì ·ûî·üä·ûª·ûì·ûí·ûø·ûì·ûñ·ûª·ûë·üí·ûí·û∑", g:"M"},{id:"181", n:"·ûà·ûì ·ûÖ·üÅ·ûü·üí·ûä·û∂", g:"M"},{id:"87", n:"·û¢·üä·ûª·üÜ ·ûö·ûè·ûì·û∂·ûü·û∑·ûë·üí·ûí·û∏·ûÄ·û∂·ûö", g:"F"},{id:"113", n:"·ûü·üä·û∏·ûò ·ûü·û∑·ûë·üí·ûí·û∏·ûÄ·û∂·ûö", g:"F"},{id:"164", n:"·û¢·üä·ûº·ûü·ûª·ûú·ûé·üí·ûé ·ûú·üÅ·û†·û∂·üç", g:"M"},{id:"177", n:"·ûú·û∂·ûü·ûì·û∂ ·ûñ·üÅ·ûá·üí·ûö·ûü·ûª·ûò·üâ·û∂·ûõ·û∏", g:"F"},{id:"165", n:"·ûõ·ûπ·ûò ·ûõ·û∏·ûò·üâ·üÅ·ûÑ·ûÇ·üê·ûÑ·üí·ûÇ", g:"M"}] },
            { className: "·ûò·ûè·üí·ûè·üÅ·ûô·üí·ûô·ûÅ·üí·ûñ·ûü·üã ·ü°", students: [{id:"29", n:"·ûÅ·û∂·ûì·üã ·ûò·ûª·ûì·û∏·ûú·ûõ·üí·ûõ·ûó·û∂", g:"F"},{id:"101", n:"·ûà·ûª·üÜ ·ûú·û∏·ûö·üã·ûü·û∑·ûë·üí·ûí", g:"M"},{id:"65", n:"·ûì·û∑·ûè ·ûü·ûª·ûí·û∂·ûö·üâ·û∂", g:"M"},{id:"78", n:"·ûì·û∏ ·ûõ·û∏·ûá·û∏·ûÑ", g:"F"},{id:"117", n:"·û†·üä·ûª·ûì ·ûö·û∂·ûé·üí·ûé·ûá·üÅ·ûé·ûü·üí·ûä·û∂", g:"M"},{id:"47", n:"·ûî·ûª·ûé·üí·ûé·ûá·üÅ ·ûá·üÅ·ûì·ûì·û∏", g:"F"},{id:"14", n:"·ûÉ·ûª·ûì ·ûë·üÅ·ûñ·û∏", g:"F"},{id:"62", n:"·ûö·û∑·ûë·üí·ûí·û∏ ·ûñ·û∑·ûü·üí·ûü·ûª·ûè·ûü·ûª·ûÄ·üí·ûö·ûπ·ûè", g:"M"},{id:"49", n:"·ûÑ·û∑·ûì ·ûë·üÄ·ûì·ûú·û∑·ûì", g:"M"},{id:"107", n:"·ûü·ûª·ûó·ûÄ·üí·ûö·üê ·ûú·ûö·üà·ûü·û∑·ûë·üí·ûí", g:"M"},{id:"170", n:"·û¢·ûª·ûõ·ûú·ûø·ûì ·ûä·û∂·ûú·û∏·ûì", g:"F"},{id:"137", n:"·ûü·ûø·ûì ·ûÖ·û∂·ûì·üã·ûü·ûª·ûò·üÅ·ûí·û∂", g:"F"},{id:"1", n:"·ûî·üä·ûª·ûì·ûö·û∏·ûì ·ûÅ·üÅ·ûò·ûö·û∂", g:"M"}] },
            { className: "·ûò·ûè·üí·ûè·üÅ·ûô·üí·ûô·ûÅ·üí·ûñ·ûü·üã ·ü¢", students: [{id:"54", n:"·ûô·ûì·üã ·ûõ·û∏·û†·üÅ·ûÑ", g:"M"},{id:"75", n:"·ûú·û∑·ûì ·ûî·ûâ·üí·ûâ·û∂·ûú·üê·ûì·üí·ûè", g:"M"},{id:"90", n:"·ûü·ûº ·ûö·ûü·üí·ûò·û∏·ûñ·ûì·û∑·ûè·û∂", g:"F"},{id:"50", n:"·ûü·ûº·ûô ·ûö·ûÄ·üí·ûü·û∂", g:"M"},{id:"0072", n:"·û¢·üä·ûº ·ûü·ûª·ûÅ·û¢·û∂·ûò·û∏", g:"F"},{id:"137", n:"·ûü·ûø·ûì ·ûÖ·û∂·ûì·üã·ûü·ûª·ûò·üÅ·ûí·û∂", g:"F"},{id:"176", n:"·ûî·üâ·ûπ·ûò ·ûò·üâ·û∏·ûá·ûº", g:"F"},{id:"85", n:"·ûü·üÅ·ûö·û∏ ·ûÖ·ûì·üí·ûë·ûú·ûå·üí·ûç·ûì·û∂", g:"M"},{id:"161", n:"·ûõ·û∏·ûò ·û†·üä·û∏·ûî·üâ", g:"M"},{id:"55", n:"·û¢·üä·û∂ ·ûá·û∏·ûÑ·û†·üê·ûö", g:"F"},{id:"0079", n:"·ûò·û∑·ûè·üí·ûè ·ûò·üâ·üÅ·ûÑ·û†·üÅ·ûÑ", g:"M"},{id:"74", n:"·ûÖ·û∂·ûì·üã·ûì·û∏ ·ûü·üä·ûº·ûü·û∂·ûì·üã·ûé·û∂", g:"F"}] },
            { className: "·ûê·üí·ûì·û∂·ûÄ·üã·ûë·û∏ ·ü° (·ûñ·üí·ûö·ûπ·ûÄ)", students: [{id:"75", n:"·ûÜ·ûì ·ûú·û∑·ûö·üà·ûü·û∑·ûë·üí·ûí", g:"M"},{id:"47", n:"·ûá·û∂·û°·û∑·ûÖ ·ûÄ·ûº·ûõ·û∏·ûì", g:"M"},{id:"92", n:"·ûü·ûª·ûî·ûâ·üí·ûâ·û∂ ·ûü·üÑ·ûò·üâ·û∂", g:"F"},{id:"83", n:"·ûó·û∫·ûì ·ûê·û∑·ûö·û∂·ûô·ûª", g:"M"},{id:"69", n:"·ûõ·û∏ ·ûÜ·û∂·ûô·ûà·üê·ûì", g:"M"},{id:"77", n:"·ûú·ûª·ûå·üí·ûç·û∏ ·ûä·û∂·ûú·û∏·ûÄ·û∂", g:"F"},{id:"93", n:"·û¢·üä·ûπ·ûò ·ûö·üÑ·ûÖ·ûì·û∂", g:"F"},{id:"72", n:"·ûú·ûÑ·üí·ûü ·ûä·û∂·ûö·üâ·û∂·ûú·û∏·ûì", g:"M"},{id:"95", n:"·ûÖ·û∂·ûú ·ûú·û∑·ûì·û†·û∂·ûú", g:"M"},{id:"80", n:"·ûÑ·ûΩ·ûì ·ûî·ûâ·üí·ûâ·û∂·ûñ·ûª·ûë·üí·ûí·û∑·ûü·üê·ûÄ·üí·ûè·û∑", g:"M"}] },
            { className: "·ûê·üí·ûì·û∂·ûÄ·üã·ûë·û∏ ·ü° (·ûõ·üí·ûÑ·û∂·ûÖ)", students: [{id:"88", n:"·ûÖ·üÜ·ûö·ûæ·ûì ·ûÖ·ûì·üí·ûë·ûß·ûè·üí·ûè·ûò", g:"M"},{id:"91", n:"·ûî·üä·ûº ·ûü·û∂·ûí·ûª·ûÄ·û∂·ûö", g:"F"},{id:"82", n:"·ûü·üÅ·ûì ·ûô·üâ·û∂·ûü·üí·ûò·û∏·ûì·ûé·û∂", g:"F"},{id:"85", n:"·ûä·ûì ·ûü·ûª·ûó·üê·ûé·üí·ûå·ûò·üâ·ûº·ûì·û∏·ûÄ·û∂", g:"F"},{id:"78", n:"·ûü·üä·üí·ûö·û∂·ûÑ ·ûü·üÄ·ûú·û†·üí·ûú·ûª·ûÑ", g:"F"},{id:"73", n:"·û†·üÅ·ûÑ ·ûò·üâ·û∏·û¢·üä·û∑", g:"F"},{id:"74", n:"·û¢·ûø·ûì ·ûñ·üÖ·ûú·ûõ·üê·ûÄ·üí·ûÅ", g:"F"},{id:"70", n:"·ûö·üê·ûè·üí·ûì ·ûö·üâ·û∂·ûê·üÅ·ûî", g:"M"}] },
            { className: "·ûê·üí·ûì·û∂·ûÄ·üã·ûë·û∏ ·ü¢ (·ûÄ)", students: [{id:"21", n:"·ûÖ·ûì·üí·ûê·û∂ ·ûõ·û∏·ûè·û∂", g:"F"},{id:"20", n:"·ûñ·üÖ ·ûü·ûª·ûÅ·ûÖ·û∑·ûì", g:"M"},{id:"17", n:"·ûé·û∂·ûö·üâ·û∂ ·û†·üÅ·ûÑ·ûõ·û∏", g:"M"},{id:"23", n:"·ûü·ûª·ûÅ ·ûü·ûò·üí·ûî·ûè·üí·ûè·û∑", g:"M"},{id:"22", n:"·ûü·ûª·ûÅ ·ûä·û∂·ûõ·û∏·ûü", g:"F"},{id:"29", n:"·ûü·üí·ûö·ûü·üã ·ûö·û∏·û†·üí·ûü·û∂", g:"F"},{id:"41", n:"·ûî·üâ·ûª·ûì ·ûö·û∏·ûô·üâ·û∂", g:"F"}] },
            { className: "·ûê·üí·ûì·û∂·ûÄ·üã·ûë·û∏ ·ü¢ (·ûÅ)", students: [{id:"59", n:"·û¢·ûª·ûÑ ·ûî·ûâ·üí·ûâ·û∂·ûö·üê·ûè·üí·ûì", g:"M"},{id:"31", n:"·ûò·û∑·ûè·üí·ûè ·ûò·üâ·üÅ·ûÑ·û†·ûΩ·ûö", g:"M"},{id:"14", n:"·ûô·ûü·üã ·ûì·ûö·û∑·ûì·üí·ûë", g:"M"},{id:"33", n:"·ûú·ûÑ·üã ·ûñ·ûª·ûë·üí·ûí·û∑·ûè·û∂", g:"F"},{id:"62", n:"·ûü·ûº·ûô ·ûî·ûâ·üí·ûâ·û∂", g:"M"},{id:"40", n:"·ûü·üÅ·ûÑ ·ûü·û∂·ûé·û∂", g:"F"},{id:"39", n:"·ûÖ·ûì·üí·ûë ·ûü·ûª·ûï·û∂·ûô·üâ·û∂·ûò·üÅ·ûÉ", g:"M"},{id:"30", n:"·ûü·üä·ûì·ûú·û∏·ûö·üà ·ûî·ûâ·üí·ûâ·û∂·ûë·üÅ·ûñ·û∏", g:"F"},{id:"27", n:"·ûî·üä·ûº ·ûè·û∂·ûò·üâ·û∂", g:"M"},{id:"65", n:"·ûÄ·üÇ·ûú ·ûò·ûª·ûì·üí·ûì·û∏·ûß·ûè·üí·ûè·ûò", g:"M"},{id:"56", n:"·ûú·ûì·üí·ûè·ûú·û∑·ûì ·ûê·û∂·ûé·û∂", g:"F"},{id:"36", n:"·û†·û∂·ûì ·ûü·üä·û∏·ûú·û†·üê·ûö", g:"F"}] },
            { className: "·ûê·üí·ûì·û∂·ûÄ·üã·ûë·û∏ ·ü£", students: [{id:"9", n:"·ûÄ·üÇ·ûú ·ûú·û∏·ûì·ûü·ûª·ûß·ûè·üí·ûè·ûè·û∂·ûö·û∂", g:"F"},{id:"28", n:"·ûà·ûª·ûì·ûè·û∂ ·ûö·ûè·ûì·üà·ûÅ·ûª·ûì·ûä·ûº", g:"F"},{id:"10", n:"·ûô·üâ·û∂ ·ûñ·üÅ·ûá·üí·ûö·ûò·üâ·ûº·ûì·û∏·ûÄ·û∂", g:"F"},{id:"15", n:"·ûõ·û∏·ûò ·ûñ·ûª·ûë·üí·ûí·û∑·ûö·û∂·ûá", g:"M"},{id:"3", n:"·û° ·ûü·üä·û∏·ûú·û†·üä·ûΩ·ûô", g:"F"},{id:"2", n:"·û°·û∂·ûô ·ûò·ûª·ûì·û∑·ûÖ·û∑·ûì·üí·ûä·û∂", g:"F"},{id:"24", n:"·û¢·üÑ·ûÄ ·ûì·û∑·ûü·û∑·üí·ûü·ûè", g:"M"},{id:"44", n:"·ûÖ·üÜ·ûö·ûæ·ûì ·ûò·üâ·û∂·ûì·û∏·ûè·û∂", g:"F"}] },
            { className: "·ûê·üí·ûì·û∂·ûÄ·üã·ûë·û∏ ·ü§-·ü•", students: [{id:"1", n:"·û°·û∂·ûô ·ûó·û∂·ûö·üâ·û∂·ûä·û∂·ûú·û∏·ûå", g:"M"},{id:"42", n:"·ûú·ûÑ·üí·ûü ·ûò·ûª·ûì·û∏·ûÄ·ûâ·üí·ûÖ·ûì·û∂", g:"F"},{id:"43", n:"·ûñ·üÖ ·ûü·ûª·ûì·û∏·ûè·û∂", g:"F"},{id:"4", n:"·û° ·ûü·ûª·ûú·ûé·üí·ûé·û†·û∂·ûì·üã·ûé·û∂", g:"F"}] },
            { className: "Foundation 1 (AM)", students: [{id:"-", n:"·ûÜ·û∂·ûÑ ·ûü·üä·û∏·ûÑ·û¢·û∂·ûô", g:"F"},{id:"-", n:"·ûü·üä·û∏·ûò ·ûü·û∑·ûë·üí·ûí·û∑·ûÄ·û∂", g:"F"},{id:"82", n:"·ûö·ûª·ûì ·ûö·ûü·üí·ûò·û∏", g:"M"},{id:"149", n:"·ûí·û∏ ·ûü·ûª·ûú·ûé·üí·ûé ·ûü·û∑·ûë·üí·ûí·û∑·ûÄ·û∂", g:"F"},{id:"143", n:"·ûï·ûì ·ûü·ûª·ûÅ·û†·üÄ·ûÑ", g:"M"},{id:"133", n:"·ûü·ûª·ûë·üí·ûí ·ûõ·û∏·ûì·ûî·üí·ûö·ûª·ûü·ûü·û∑·ûë·üí·ûí", g:"M"},{id:"134", n:"·û¢·üä·û∂·ûî ·ûõ·û∏·ûô·û∏·ûÑ", g:"F"},{id:"88", n:"·ûÖ·üÜ·ûö·ûæ·ûì ·ûÖ·ûì·üí·ûë·ûß·ûè·üí·ûè·ûò", g:"M"},{id:"127", n:"·û†·ûò ·ûÖ·û∂·ûì·üã·ûî·ûª·ûö·û∏·ûö·ûÄ·üí·ûü", g:"M"},{id:"182", n:"·ûè·û∂·üÜ·ûÑ ·û†·üä·ûΩ·ûô·ûõ·û∏·ûì", g:"F"}] },
            { className: "Foundation 1 (PM)", students: [{id:"116", n:"·ûÜ·ûì ·ûò·üâ·üÅ·ûÑ·ûü·üä·û∏·ûì", g:"M"},{id:"58", n:"·ûÑ·ûΩ·ûì ·ûÇ·û∏·ûò·û†·û∂·ûî·üã", g:"M"},{id:"145", n:"·ûÜ·û∂·ûô ·ûó·û∏·ûÑ·û¢·üä·û∏·ûÑ", g:"F"},{id:"125", n:"·ûî·ûâ·üí·ûâ·û∂ ·ûó·üÅ·ûè·üí·ûö·û∂", g:"F"},{id:"90", n:"·ûÖ·üÜ·ûö·ûæ·ûì ·ûö·ûø·ûì·ûö·ûπ·ûë·üí·ûí·û∑·ûö·û∂·ûá", g:"M"},{id:"159", n:"·ûê·ûì ·ûü·üä·û∏·û†·üí·ûÇ·üí·ûü·û∑·ûÖ", g:"F"}] },
            { className: "Foundation 2 (A)", students: [{id:"86", n:"·ûí·üÅ·ûÑ ·ûò·üâ·üÅ·ûÑ·ûõ·û∏", g:"M"},{id:"70", n:"·ûö·üê·ûè·üí·ûì ·ûö·üâ·û∂·ûê·üÅ·ûî", g:"M"}] },
            { className: "Foundation 2 (Narein)", students: [{id:"68", n:"·ûü·ûª·ûÑ ·ûö·ûπ·ûë·üí·ûí·ûü·üê·ûÄ·üí·ûÄ", g:"M"},{id:"66", n:"·ûî·üä·ûª·ûì·û°·üÅ·ûÑ ·û¢·üä·üÉ·ûä·ûπ·ûÄ", g:"M"},{id:"67", n:"·ûó·üÑ·ûÇ ·ûü·üí·ûñ·û∏·ûè·ûå·û∏", g:"M"}] },
            { className: "Level 1 (SreyNet)", students: [{id:"62", n:"·ûà·ûº·ûÄ ·ûà·û∑·ûì·û°·ûª·ûÑ", g:"M"},{id:"64", n:"·ûõ·û∂·ûÑ ·ûú·ûå·üí·ûÉ·ûì·ûí·ûì·ûª", g:"M"}] },
            { className: "Level 2 (SreyNet)", students: [{id:"48", n:"·ûü·ûª·ûó·ûÄ·üí·ûä·û∑ ·ûë·û∑·ûè·üí·ûö·ûä·û∂·ûé·û∂", g:"F"},{id:"63", n:"·ûì·ûø·ûì ·ûú·ûå·üí·ûç·ûì·üá", g:"M"},{id:"49", n:"·ûü·ûª·ûó·ûÄ·üí·ûä·û∑ ·ûö·ûè·ûì", g:"M"},{id:"61", n:"·ûï·ûõ ·ûü·ûª·ûú·ûé·üí·ûé", g:"M"},{id:"53", n:"·û†·ûª·ûÑ ·ûü·û∑·ûë·üí·ûí·û∑·ûé·û∂·ûõ·üã", g:"M"},{id:"55", n:"·ûí·üÅ·ûÑ ·ûá·ûº·ûõ·û∏·ûâ", g:"F"},{id:"1", n:"·û°·û∂·ûô ·ûó·û∂·ûö·üâ·û∂·ûä·û∂·ûú·û∏·ûå", g:"M"},{id:"4", n:"·û° ·ûü·ûª·ûú·ûé·üí·ûé·û†·û∂·ûì·üã·ûé·û∂", g:"F"}] }
        ];

        let currentIdx = -1;

        function init() {
            const list = document.getElementById('class-list');
            allData.forEach((c, i) => {
                const btn = document.createElement('button');
                btn.className = "text-left px-3 py-2 rounded text-[13px] font-semibold hover:bg-slate-50 transition-all flex justify-between";
                btn.innerHTML = `<span>${c.className}</span> <span class="text-slate-400 text-[10px]">${c.students.length}</span>`;
                btn.onclick = () => {
                    currentIdx = i;
                    document.querySelectorAll('#class-list button').forEach(b => b.classList.remove('active-class'));
                    btn.classList.add('active-class');
                    refreshTable();
                };
                list.appendChild(btn);
            });
        }

        function selectAllPresent() {
            if (currentIdx === -1) return;
            const data = allData[currentIdx];
            data.students.forEach((_, i) => {
                document.querySelector(`input[name="s-${i}"][value="P"]`).checked = true;
            });
        }

        function refreshTable() {
            if (currentIdx === -1) return;
            document.getElementById('empty-msg').style.display = 'none';
            const data = allData[currentIdx];
            const month = document.getElementById('sel-month').value;
            const year = document.getElementById('sel-year').value;
            document.getElementById('display-class-name').innerText = data.className;
            document.getElementById('display-date').innerText = `Period: ${month} ${year}`;
            
            const storageKey = `mikids_v9_${data.className}_${month}_${year}`;
            const saved = JSON.parse(localStorage.getItem(storageKey)) || {};

            const tbody = document.getElementById('student-table-body');
            tbody.innerHTML = '';
            
            data.students.forEach((s, i) => {
                const status = saved[s.n] || 'P';
                tbody.innerHTML += `
                    <tr>
                        <td class="p-4 text-center text-slate-400 font-mono text-[10px]">${i+1}</td>
                        <td class="p-4 font-bold text-blue-800 text-xs">${s.id}</td>
                        <td class="p-4 font-semibold text-slate-700">${s.n}</td>
                        <td class="p-4 text-center text-xs font-bold">${s.g}</td>
                        <td class="p-4">
                            <div class="flex justify-center gap-6">
                                <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="s-${i}" value="P" ${status==='P'?'checked':''} class="radio-p w-4 h-4 accent-emerald-500"> <span class="text-[11px]">·ûò·ûÄ(‚úÖ)</span></label>
                                <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="s-${i}" value="L" ${status==='L'?'checked':''} class="radio-l w-4 h-4 accent-amber-500"> <span class="text-[11px]">·ûÖ·üí·ûî·û∂·ûî·üã(P)</span></label>
                                <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="s-${i}" value="A" ${status==='A'?'checked':''} class="radio-a w-4 h-4 accent-red-500"> <span class="text-[11px]">·û¢·ûú·ûè·üí·ûè·ûò·û∂·ûì(A)</span></label>
                            </div>
                        </td>
                    </tr>`;
            });
        }

        function saveLocal() {
            if (currentIdx === -1) return alert("Select a class!");
            const data = allData[currentIdx];
            const month = document.getElementById('sel-month').value;
            const year = document.getElementById('sel-year').value;
            const key = `mikids_v9_${data.className}_${month}_${year}`;
            let obj = {};
            data.students.forEach((s, i) => { obj[s.n] = document.querySelector(`input[name="s-${i}"]:checked`).value; });
            localStorage.setItem(key, JSON.stringify(obj));
            alert("Attendance saved!");
        }

        async function sendToTelegram() {
            if (currentIdx === -1) return alert("Select a class!");
            const token = document.getElementById('tg-token').value;
            const cid = document.getElementById('tg-id').value;
            const data = allData[currentIdx];
            const month = document.getElementById('sel-month').value;

            let abs = [], lvs = [], pCount = 0;
            data.students.forEach((s, i) => {
                const val = document.querySelector(`input[name="s-${i}"]:checked`).value;
                if(val === 'P') pCount++;
                else if(val === 'L') lvs.push(s.n);
                else abs.push(s.n);
            });

            let msg = `üîî *REPORT: ${data.className}*\nüìÖ Month: *${month}*\n`;
            msg += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n‚úÖ Present: ${pCount}\nüü† Leave: ${lvs.length}\nüî¥ Absent: ${abs.length}\n`;
            if(abs.length > 0) msg += `\n‚ùå *Absents:*\n${abs.map((n, i) => (i+1)+'. '+n).join('\n')}`;
            if(lvs.length > 0) msg += `\n\nüìù *Leaves:*\n${lvs.map((n, i) => (i+1)+'. '+n).join('\n')}`;

            const res = await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({chat_id: cid, text: msg, parse_mode: 'Markdown'})
            });
            if(res.ok) alert("Report sent!");
            else alert("Error sending message. Check Chat ID.");
        }
        init();
    </script>
</body>
</html>
